{% extends "todo/base.html" %}

{% block title %}{{ task.name }} - Task{% endblock %}

{% block content %}

<script type="text/javascript">

$(document).ready(function() {
    // Initially hide the TaskEdit form
    $('#TaskEdit').hide();
    
    // toggle slide to show the Add Task form when link clicked
    $('#slideToggle').click(function(){
        $(this).siblings('#TaskEdit').slideToggle();
    });
});
</script>


{% ifequal auth_ok 1 %}

<h2>{{ task }}</h2>

<form action="" method="POST">
<p style="margin-bottom:0px;" id="slideToggle" >&rarr; Click to edit details &larr;</p>

<p><strong>In project:</strong> <a href="{% url todo-incomplete_tasks task.project.id %}" class="showlink">{{ task.list }}</a><br /></p>

<p>
<strong>Assigned to:</strong> {{ task.assigned_to.first_name }} {{ task.assigned_to.last_name }}<br />
<strong>Created by:</strong> {{ task.created_by.first_name }} {{ task.created_by.last_name }}<br />
<strong>Due date:</strong>  {{ task.date_due }}<br />
<strong>Completed:</strong> {{ form.completed }}<br />
</p>


{% if task.note %}
<p><strong>Note:</strong> {{ task.note|safe|linebreaks }}</p>    
{% endif %}

<div id="TaskEdit">
<h3>Edit Task</h3>

<table>
    {{ form.management_form }}

    
    {{ form.id }}
<tr>    
    <td>Task:</td>
    <td>{{ form.name }}  </td>
</tr>

<tr>    
    <td>Project:</td>
    <td>{{ form.project }}  </td>
</tr>

<tr>    
    <td>Created:</td>
    <td>{{ form.date_created }}  </td>
</tr>

<tr>    
    <td>Due:</td>
    <td>{{ form.date_due }}  </td>
</tr>



<tr>    
    <td>Created by:</td>
    <td>{{ form.created_by }}  </td>
</tr>

<tr>    
    <td>Assigned to:</td>
    <td>{{ form.assigned_to }}  </td>
</tr>

<tr>    
    <td valign="top">Note:</td>
    <td>{{ form.description }}  </td>
</tr>

<tr>    
    <td>Priority:</td>
    <td>{{ form.priority }}  </td>
</tr>
    
</table>   
<p><input type="submit" class="todo-button" name="edit_task" value="Edit task"></p>
</div>


<hr />


<h3>Add comment</h3>

    <textarea name="comment-body" rows="8" cols="40"></textarea>
    <p><input class="todo-button"type="submit" value="Submit"></p>

</form>

<h3>Comments on this task</h3>    

{% for comment in comment_list %}
    <p><strong>{{ comment.author.first_name }} {{ comment.author.last_name }}, {{ comment.date|date:"F d Y" }}</strong> </p>
    {{ comment.body|safe|linebreaks }}
{% endfor %}



{% endifequal %}
	
{% endblock %}
